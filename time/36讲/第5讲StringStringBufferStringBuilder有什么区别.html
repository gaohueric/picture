<head><meta charset="utf-8"><meta name="Keywords" content="æå®¢æ—¶é—´,æå®¢é‚¦,æå®¢é‚¦ç§‘æŠ€,æå®¢é‚¦æ§è‚¡,æå®¢æ—¶é—´App,ä¸“æ è®¢é˜…,æå®¢æ–°é—»,äºŒå‰æ ‘,æå®¢Live,QCon,å·¦è€³å¬é£,AIæŠ€æœ¯å†…å‚,å¤§èˆªæµ·æ—¶ä»£,é™ˆçš“,å¾é£,æ´ªäº®åŠ¼,éœæ³°ç¨³,æ± å»ºå¼º,Selina,Gary,InfoQ,æå®¢æœç´¢"><meta name="description" content="æå®¢æ—¶é—´æ˜¯æå®¢é‚¦ç§‘æŠ€å‡ºå“çš„ä¸€æ¬¾ IT å†…å®¹çŸ¥è¯†æœåŠ¡ Appï¼Œå†…å®¹åŒ…å«ä¸“æ è®¢é˜…ã€æå®¢æ–°é—»ã€çƒ­ç‚¹ä¸“é¢˜ã€ç›´æ’­ã€è§†é¢‘å’ŒéŸ³é¢‘ç­‰å¤šå½¢å¼çš„çŸ¥è¯†å†…å®¹ï¼Œå¹¶è®¾æœ‰é™ˆçš“ä¸“æ ã€å¾é£ä¸“æ ã€æ´ªäº®åŠ¼ä¸“æ ç­‰ä¸“æ ä¾›è®¢é˜…ã€‚"><link rel="apple-touch-icon" sizes="180x180" href="//static001.geekbang.org/static/icon/time/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="//static001.geekbang.org/static/icon/time/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="//static001.geekbang.org/static/icon/time/favicon-16x16.png"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="format-detection" content="telephone=no"><meta name="apple-itunes-app" content="app-id=1238203070, app-argument=zeus://columns"><title>æå®¢æ—¶é—´ | Javaæ ¸å¿ƒæŠ€æœ¯36è®²</title><script async="" src="https://www.google-analytics.com/analytics.js"></script><script type="text/javascript">if(!('flex' in document.documentElement.style) && !navigator.userAgent.match(/spider|googlebot|bingbot|geekbang|yahoo! Slurp/i)){
        window.location.href = 'https://static001.geekbang.org/static/common/browser_update/index.html'
      }</script><script type="text/javascript">;(function(root) {
        root._tt_config = true;
        var ta = document.createElement('script'); ta.type = 'text/javascript'; ta.async = true;
        ta.src = document.location.protocol + '//' + 's1.pstatp.com/bytecom/resource/track_log/src/toutiao-track-log.js';
        ta.onerror = function () {
            var request = new XMLHttpRequest();
            var web_url = window.encodeURIComponent(window.location.href);
            var js_url  = ta.src;
            var url = '//ad.toutiao.com/link_monitor/cdn_failed?web_url=' + web_url + '&js_url=' + js_url + '&convert_id=1606932352132152';
            request.open('GET', url, true);
            request.send(null);
        }
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ta, s);
      })(window);</script><link href="https://static001.geekbang.org/static/time/css/app.289a66fcd4280dc25050023ff5caff6e.css" rel="stylesheet"><style type="text/css">.comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on{color:#ff5a05}.comment-item .info .hd .control .btn-praise span{color:#888}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head><body><div id="MathJax_Message" style="display: none;"></div><div id="app"><div data-v-87ffcada="" class="article"><!----> <div data-v-87ffcada="" class="main main-app" style="margin-top: 0px;"><h1 data-v-87ffcada="" class="article-title">
      ç¬¬5è®² | Stringã€StringBufferã€StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
    </h1> <div data-v-87ffcada="" class="article-info"><span data-v-87ffcada="">2018-05-15</span> <span data-v-87ffcada="">æ¨æ™“å³°</span></div> <div data-v-87ffcada="" class="article-content typo common-content"><img data-v-87ffcada="" src="https://static001.geekbang.org/resource/image/2a/e6/2af55d6bf973628603ab240ec16799e6.jpg"> <!----> <div data-v-87ffcada="" class="mini-audio-player"><a href="javascript:;" class="btn-play"></a> <div class="audio-info"><h3>ç¬¬5è®² | Stringã€StringBufferã€StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3> <p><span>æœ—è¯»äººï¼šé»„æ´²å›&nbsp;&nbsp;&nbsp;</span> <span>11â€²59â€²â€² | 5.49M</span></p></div> <!----> <audio title="ç¬¬5è®² | Stringã€StringBufferã€StringBuilderæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" src="https://res001.geekbang.org/resource/audio/35/af/35a90cbba35136702628acf87c4b30af.mp3" controls="controls"></audio></div> <div data-v-87ffcada="" id="article-content" class=""><div class="text"><p>ä»Šå¤©æˆ‘ä¼šèŠèŠæ—¥å¸¸ä½¿ç”¨çš„å­—ç¬¦ä¸²ï¼Œåˆ«çœ‹å®ƒä¼¼ä¹å¾ˆç®€å•ï¼Œä½†å…¶å®å­—ç¬¦ä¸²å‡ ä¹åœ¨æ‰€æœ‰ç¼–ç¨‹è¯­è¨€é‡Œéƒ½æ˜¯ä¸ªç‰¹æ®Šçš„å­˜åœ¨ï¼Œå› ä¸ºä¸ç®¡æ˜¯æ•°é‡è¿˜æ˜¯ä½“ç§¯ï¼Œå­—ç¬¦ä¸²éƒ½æ˜¯å¤§å¤šæ•°åº”ç”¨ä¸­çš„é‡è¦ç»„æˆã€‚</p>
<p>ä»Šå¤©æˆ‘è¦é—®ä½ çš„é—®é¢˜æ˜¯ï¼Œ<span class="orange">ç†è§£ Java çš„å­—ç¬¦ä¸²ï¼ŒStringã€StringBufferã€StringBuilder æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></p>
<h2>å…¸å‹å›ç­”</h2>
<p>String æ˜¯ Java è¯­è¨€éå¸¸åŸºç¡€å’Œé‡è¦çš„ç±»ï¼Œæä¾›äº†æ„é€ å’Œç®¡ç†å­—ç¬¦ä¸²çš„å„ç§åŸºæœ¬é€»è¾‘ã€‚å®ƒæ˜¯å…¸å‹çš„ Immutable ç±»ï¼Œè¢«å£°æ˜æˆä¸º final classï¼Œæ‰€æœ‰å±æ€§ä¹Ÿéƒ½æ˜¯ final çš„ã€‚ä¹Ÿç”±äºå®ƒçš„ä¸å¯å˜æ€§ï¼Œç±»ä¼¼æ‹¼æ¥ã€è£å‰ªå­—ç¬¦ä¸²ç­‰åŠ¨ä½œï¼Œéƒ½ä¼šäº§ç”Ÿæ–°çš„ String å¯¹è±¡ã€‚ç”±äºå­—ç¬¦ä¸²æ“ä½œçš„æ™®éæ€§ï¼Œæ‰€ä»¥ç›¸å…³æ“ä½œçš„æ•ˆç‡å¾€å¾€å¯¹åº”ç”¨æ€§èƒ½æœ‰æ˜æ˜¾å½±å“ã€‚</p>
<p>StringBuffer æ˜¯ä¸ºè§£å†³ä¸Šé¢æåˆ°æ‹¼æ¥äº§ç”Ÿå¤ªå¤šä¸­é—´å¯¹è±¡çš„é—®é¢˜è€Œæä¾›çš„ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ append æˆ–è€… add æ–¹æ³•ï¼ŒæŠŠå­—ç¬¦ä¸²æ·»åŠ åˆ°å·²æœ‰åºåˆ—çš„æœ«å°¾æˆ–è€…æŒ‡å®šä½ç½®ã€‚StringBuffer æœ¬è´¨æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯ä¿®æ”¹å­—ç¬¦åºåˆ—ï¼Œå®ƒä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿéšä¹‹å¸¦æ¥äº†é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œæ‰€ä»¥é™¤éæœ‰çº¿ç¨‹å®‰å…¨çš„éœ€è¦ï¼Œä¸ç„¶è¿˜æ˜¯æ¨èä½¿ç”¨å®ƒçš„åç»§è€…ï¼Œä¹Ÿå°±æ˜¯ StringBuilderã€‚</p>
<p>StringBuilder æ˜¯ Java 1.5 ä¸­æ–°å¢çš„ï¼Œåœ¨èƒ½åŠ›ä¸Šå’Œ StringBuffer æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œä½†æ˜¯å®ƒå»æ‰äº†çº¿ç¨‹å®‰å…¨çš„éƒ¨åˆ†ï¼Œæœ‰æ•ˆå‡å°äº†å¼€é”€ï¼Œæ˜¯ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„é¦–é€‰ã€‚</p>
<h2>è€ƒç‚¹åˆ†æ</h2>
<p>å‡ ä¹æ‰€æœ‰çš„åº”ç”¨å¼€å‘éƒ½ç¦»ä¸å¼€æ“ä½œå­—ç¬¦ä¸²ï¼Œç†è§£å­—ç¬¦ä¸²çš„è®¾è®¡å’Œå®ç°ä»¥åŠç›¸å…³å·¥å…·å¦‚æ‹¼æ¥ç±»çš„ä½¿ç”¨ï¼Œå¯¹å†™å‡ºé«˜è´¨é‡ä»£ç æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å‰é¢çš„å›ç­”æ˜¯ä¸€ä¸ªé€šå¸¸çš„æ¦‚è¦æ€§å›ç­”ï¼Œè‡³å°‘ä½ è¦çŸ¥é“ String æ˜¯ Immutable çš„ï¼Œå­—ç¬¦ä¸²æ“ä½œä¸å½“å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡ä¸´æ—¶å­—ç¬¦ä¸²ï¼Œä»¥åŠçº¿ç¨‹å®‰å…¨æ–¹é¢çš„åŒºåˆ«ã€‚</p>
<p>å¦‚æœç»§ç»­æ·±å…¥ï¼Œé¢è¯•å®˜å¯ä»¥ä»å„ç§ä¸åŒçš„è§’åº¦è€ƒå¯Ÿï¼Œæ¯”å¦‚å¯ä»¥ï¼š</p>
<!-- [[[read_end]]] -->
<ul>
<li>
<p>é€šè¿‡ String å’Œç›¸å…³ç±»ï¼Œè€ƒå¯ŸåŸºæœ¬çš„çº¿ç¨‹å®‰å…¨è®¾è®¡ä¸å®ç°ï¼Œå„ç§åŸºç¡€ç¼–ç¨‹å®è·µã€‚</p>
</li>
<li>
<p>è€ƒå¯Ÿ JVM å¯¹è±¡ç¼“å­˜æœºåˆ¶çš„ç†è§£ä»¥åŠå¦‚ä½•è‰¯å¥½åœ°ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>è€ƒå¯Ÿ JVM ä¼˜åŒ– Java ä»£ç çš„ä¸€äº›æŠ€å·§ã€‚</p>
</li>
<li>
<p>String ç›¸å…³ç±»çš„æ¼”è¿›ï¼Œæ¯”å¦‚ Java 9 ä¸­å®ç°çš„å·¨å¤§å˜åŒ–ã€‚</p>
</li>
<li>
<p>â€¦</p>
</li>
</ul>
<p>é’ˆå¯¹ä¸Šé¢è¿™å‡ æ–¹é¢ï¼Œæˆ‘ä¼šåœ¨çŸ¥è¯†æ‰©å±•éƒ¨åˆ†ä¸ä½ è¯¦ç»†èŠèŠã€‚</p>
<h2>çŸ¥è¯†æ‰©å±•</h2>
<p>1. å­—ç¬¦ä¸²è®¾è®¡å’Œå®ç°è€ƒé‡</p>
<p>æˆ‘åœ¨å‰é¢ä»‹ç»è¿‡ï¼ŒString æ˜¯ Immutable ç±»çš„å…¸å‹å®ç°ï¼ŒåŸç”Ÿçš„ä¿è¯äº†åŸºç¡€çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºä½ æ— æ³•å¯¹å®ƒå†…éƒ¨æ•°æ®è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œè¿™ç§ä¾¿åˆ©ç”šè‡³ä½“ç°åœ¨æ‹·è´æ„é€ å‡½æ•°ä¸­ï¼Œç”±äºä¸å¯å˜ï¼ŒImmutable å¯¹è±¡åœ¨æ‹·è´æ—¶ä¸éœ€è¦é¢å¤–å¤åˆ¶æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ StringBuffer å®ç°çš„ä¸€äº›ç»†èŠ‚ï¼Œå®ƒçš„çº¿ç¨‹å®‰å…¨æ˜¯é€šè¿‡æŠŠå„ç§ä¿®æ”¹æ•°æ®çš„æ–¹æ³•éƒ½åŠ ä¸Š synchronized å…³é”®å­—å®ç°çš„ï¼Œéå¸¸ç›´ç™½ã€‚å…¶å®ï¼Œè¿™ç§ç®€å•ç²—æš´çš„å®ç°æ–¹å¼ï¼Œéå¸¸é€‚åˆæˆ‘ä»¬å¸¸è§çš„çº¿ç¨‹å®‰å…¨ç±»å®ç°ï¼Œä¸å¿…çº ç»“äº synchronized æ€§èƒ½ä¹‹ç±»çš„ï¼Œæœ‰äººè¯´â€œè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºâ€ï¼Œè€ƒè™‘å¯é æ€§ã€æ­£ç¡®æ€§å’Œä»£ç å¯è¯»æ€§æ‰æ˜¯å¤§å¤šæ•°åº”ç”¨å¼€å‘æœ€é‡è¦çš„å› ç´ ã€‚</p>
<p>ä¸ºäº†å®ç°ä¿®æ”¹å­—ç¬¦åºåˆ—çš„ç›®çš„ï¼ŒStringBuffer å’Œ StringBuilder åº•å±‚éƒ½æ˜¯åˆ©ç”¨å¯ä¿®æ”¹çš„ï¼ˆcharï¼ŒJDK 9 ä»¥åæ˜¯ byteï¼‰æ•°ç»„ï¼ŒäºŒè€…éƒ½ç»§æ‰¿äº† AbstractStringBuilderï¼Œé‡Œé¢åŒ…å«äº†åŸºæœ¬æ“ä½œï¼ŒåŒºåˆ«ä»…åœ¨äºæœ€ç»ˆçš„æ–¹æ³•æ˜¯å¦åŠ äº† synchronizedã€‚</p>
<p>å¦å¤–ï¼Œè¿™ä¸ªå†…éƒ¨æ•°ç»„åº”è¯¥åˆ›å»ºæˆå¤šå¤§çš„å‘¢ï¼Ÿå¦‚æœå¤ªå°ï¼Œæ‹¼æ¥çš„æ—¶å€™å¯èƒ½è¦é‡æ–°åˆ›å»ºè¶³å¤Ÿå¤§çš„æ•°ç»„ï¼›å¦‚æœå¤ªå¤§ï¼Œåˆä¼šæµªè´¹ç©ºé—´ã€‚ç›®å‰çš„å®ç°æ˜¯ï¼Œæ„å»ºæ—¶åˆå§‹å­—ç¬¦ä¸²é•¿åº¦åŠ  16ï¼ˆè¿™æ„å‘³ç€ï¼Œå¦‚æœæ²¡æœ‰æ„å»ºå¯¹è±¡æ—¶è¾“å…¥æœ€åˆçš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆåˆå§‹å€¼å°±æ˜¯ 16ï¼‰ã€‚æˆ‘ä»¬å¦‚æœç¡®å®šæ‹¼æ¥ä¼šå‘ç”Ÿéå¸¸å¤šæ¬¡ï¼Œè€Œä¸”å¤§æ¦‚æ˜¯å¯é¢„è®¡çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‡å®šåˆé€‚çš„å¤§å°ï¼Œé¿å…å¾ˆå¤šæ¬¡æ‰©å®¹çš„å¼€é”€ã€‚æ‰©å®¹ä¼šäº§ç”Ÿå¤šé‡å¼€é”€ï¼Œå› ä¸ºè¦æŠ›å¼ƒåŸæœ‰æ•°ç»„ï¼Œåˆ›å»ºæ–°çš„ï¼ˆå¯ä»¥ç®€å•è®¤ä¸ºæ˜¯å€æ•°ï¼‰æ•°ç»„ï¼Œè¿˜è¦è¿›è¡Œ arraycopyã€‚</p>
<p>å‰é¢æˆ‘è®²çš„è¿™äº›å†…å®¹ï¼Œåœ¨å…·ä½“çš„ä»£ç ä¹¦å†™ä¸­ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p>
<p>åœ¨æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå…¨éƒ¨æ‹¼æ¥æ“ä½œæ˜¯åº”è¯¥éƒ½ç”¨ StringBuider å®ç°å—ï¼Ÿæ¯•ç«Ÿè¿™æ ·ä¹¦å†™çš„ä»£ç ï¼Œè¿˜æ˜¯è¦å¤šæ•²å¾ˆå¤šå­—çš„ï¼Œå¯è¯»æ€§ä¹Ÿä¸ç†æƒ³ï¼Œä¸‹é¢çš„å¯¹æ¯”éå¸¸æ˜æ˜¾ã€‚</p>
<pre><code>String strByBuilder  = new
StringBuilder().append("aa").append("bb").append("cc").append
            ("dd").toString();
             
String strByConcat = "aa" + "bb" + "cc" + "dd";
</code></pre>
<p>å…¶å®ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å¿…è¦è¿‡äºæ‹…å¿ƒï¼Œè¦ç›¸ä¿¡ Java è¿˜æ˜¯éå¸¸æ™ºèƒ½çš„ã€‚</p>
<p>æˆ‘ä»¬æ¥åšä¸ªå®éªŒï¼ŒæŠŠä¸‹é¢ä¸€æ®µä»£ç ï¼Œåˆ©ç”¨ä¸åŒç‰ˆæœ¬çš„ JDK ç¼–è¯‘ï¼Œç„¶åå†åç¼–è¯‘ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>  public class StringConcat {
        public static void main(String[] args) {
            String myStr = "aa" + "bb" + "cc" + "dd";   
             System.out.println("My String:" + myStr);   
        } 
    }
</code></pre>
<p>å…ˆç¼–è¯‘å†åç¼–è¯‘ï¼Œæ¯”å¦‚ä½¿ç”¨ JDK 9ï¼š</p>
<pre><code>${JAVA9_HOME}/bin/javac StringConcat.java  
        
${JAVA9_HOME}/bin/javap -v StringConcat.class
</code></pre>
<p>JDK 8 çš„è¾“å‡ºç‰‡æ®µæ˜¯ï¼š</p>
<pre><code>     6: new           #4                  // class java/lang/StringBuilder
     9: dup
    10: invokespecial #5                  // Method java/lang/StringBuilder."&lt;init&gt;":()V
    13: ldc           #6                  // String My String:
    15: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    18: aload_1
    19: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    22: invokevirtual #8                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
</code></pre>
<p>è€Œåœ¨ JDK 9 ä¸­ï¼Œåç¼–è¯‘çš„ç»“æœå°±éå¸¸ç®€å•äº†ï¼Œç‰‡æ®µæ˜¯ï¼š</p>
<pre><code>7: invokedynamic #4,  0              // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;
</code></pre>
<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ JDK 8 ä¸­ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œä¼šè‡ªåŠ¨è¢« javac è½¬æ¢ä¸º StringBuilder æ“ä½œï¼Œè€Œåœ¨ JDK 9 é‡Œé¢åˆ™æ˜¯å› ä¸º Java 9 ä¸ºäº†æ›´åŠ ç»Ÿä¸€å­—ç¬¦ä¸²æ“ä½œä¼˜åŒ–ï¼Œæä¾›äº† StringConcatFactoryï¼Œä½œä¸ºä¸€ä¸ªç»Ÿä¸€çš„å…¥å£ã€‚javac è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œè™½ç„¶æœªå¿…æ˜¯æœ€ä¼˜åŒ–çš„ï¼Œä½†æ™®é€šåœºæ™¯ä¹Ÿè¶³å¤Ÿäº†ï¼Œä½ å¯ä»¥é…Œæƒ…é€‰æ‹©ã€‚</p>
<p>2. å­—ç¬¦ä¸²ç¼“å­˜</p>
<p>æˆ‘ä»¬ç²—ç•¥ç»Ÿè®¡è¿‡ï¼ŒæŠŠå¸¸è§åº”ç”¨è¿›è¡Œå †è½¬å‚¨ï¼ˆDump Heapï¼‰ï¼Œç„¶ååˆ†æå¯¹è±¡ç»„æˆï¼Œä¼šå‘ç°å¹³å‡ 25% çš„å¯¹è±¡æ˜¯å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å…¶ä¸­çº¦åŠæ•°æ˜¯é‡å¤çš„ã€‚å¦‚æœèƒ½é¿å…åˆ›å»ºé‡å¤å­—ç¬¦ä¸²ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½å†…å­˜æ¶ˆè€—å’Œå¯¹è±¡åˆ›å»ºå¼€é”€ã€‚</p>
<p>String åœ¨ Java 6 ä»¥åæä¾›äº† intern() æ–¹æ³•ï¼Œç›®çš„æ˜¯æç¤º JVM æŠŠç›¸åº”å­—ç¬¦ä¸²ç¼“å­˜èµ·æ¥ï¼Œä»¥å¤‡é‡å¤ä½¿ç”¨ã€‚åœ¨æˆ‘ä»¬åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡å¹¶è°ƒç”¨ intern() æ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœå·²ç»æœ‰ç¼“å­˜çš„å­—ç¬¦ä¸²ï¼Œå°±ä¼šè¿”å›ç¼“å­˜é‡Œçš„å®ä¾‹ï¼Œå¦åˆ™å°†å…¶ç¼“å­˜èµ·æ¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒJVM ä¼šå°†æ‰€æœ‰çš„ç±»ä¼¼â€œabcâ€è¿™æ ·çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œæˆ–è€…å­—ç¬¦ä¸²å¸¸é‡ä¹‹ç±»ç¼“å­˜èµ·æ¥ã€‚</p>
<p>çœ‹èµ·æ¥å¾ˆä¸é”™æ˜¯å§ï¼Ÿä½†å®é™…æƒ…å†µä¼°è®¡ä¼šè®©ä½ å¤§è·Œçœ¼é•œã€‚ä¸€èˆ¬ä½¿ç”¨ Java 6 è¿™ç§å†å²ç‰ˆæœ¬ï¼Œå¹¶ä¸æ¨èå¤§é‡ä½¿ç”¨ internï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿé­”é¬¼å­˜åœ¨äºç»†èŠ‚ä¸­ï¼Œè¢«ç¼“å­˜çš„å­—ç¬¦ä¸²æ˜¯å­˜åœ¨æ‰€è°“ PermGen é‡Œçš„ï¼Œä¹Ÿå°±æ˜¯è‡­åæ˜­è‘—çš„â€œæ°¸ä¹…ä»£â€ï¼Œè¿™ä¸ªç©ºé—´æ˜¯å¾ˆæœ‰é™çš„ï¼Œä¹ŸåŸºæœ¬ä¸ä¼šè¢« FullGC ä¹‹å¤–çš„åƒåœ¾æ”¶é›†ç…§é¡¾åˆ°ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼ŒOOM å°±ä¼šå…‰é¡¾ã€‚</p>
<p>åœ¨åç»­ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªç¼“å­˜è¢«æ”¾ç½®åœ¨å †ä¸­ï¼Œè¿™æ ·å°±æå¤§é¿å…äº†æ°¸ä¹…ä»£å æ»¡çš„é—®é¢˜ï¼Œç”šè‡³æ°¸ä¹…ä»£åœ¨ JDK 8 ä¸­è¢« MetaSpaceï¼ˆå…ƒæ•°æ®åŒºï¼‰æ›¿ä»£äº†ã€‚è€Œä¸”ï¼Œé»˜è®¤ç¼“å­˜å¤§å°ä¹Ÿåœ¨ä¸æ–­åœ°æ‰©å¤§ä¸­ï¼Œä»æœ€åˆçš„ 1009ï¼Œåˆ° 7u40 ä»¥åè¢«ä¿®æ”¹ä¸º 60013ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‚æ•°ç›´æ¥æ‰“å°å…·ä½“æ•°å­—ï¼Œå¯ä»¥æ‹¿è‡ªå·±çš„ JDK ç«‹åˆ»è¯•éªŒä¸€ä¸‹ã€‚</p>
<pre><code>-XX:+PrintStringTableStatistics
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ JVM å‚æ•°æ‰‹åŠ¨è°ƒæ•´å¤§å°ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¹¶ä¸éœ€è¦è°ƒæ•´ï¼Œé™¤éä½ ç¡®å®šå®ƒçš„å¤§å°å·²ç»å½±å“äº†æ“ä½œæ•ˆç‡ã€‚</p>
<pre><code>-XX:StringTableSize=N
</code></pre>
<p>Intern æ˜¯ä¸€ç§<strong>æ˜¾å¼åœ°æ’é‡æœºåˆ¶</strong>ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰ä¸€å®šçš„å‰¯ä½œç”¨ï¼Œå› ä¸ºéœ€è¦å¼€å‘è€…å†™ä»£ç æ—¶æ˜ç¡®è°ƒç”¨ï¼Œä¸€æ˜¯ä¸æ–¹ä¾¿ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¾å¼è°ƒç”¨æ˜¯éå¸¸éº»çƒ¦çš„ï¼›å¦å¤–å°±æ˜¯æˆ‘ä»¬å¾ˆéš¾ä¿è¯æ•ˆç‡ï¼Œåº”ç”¨å¼€å‘é˜¶æ®µå¾ˆéš¾æ¸…æ¥šåœ°é¢„è®¡å­—ç¬¦ä¸²çš„é‡å¤æƒ…å†µï¼Œæœ‰äººè®¤ä¸ºè¿™æ˜¯ä¸€ç§æ±¡æŸ“ä»£ç çš„å®è·µã€‚</p>
<p>å¹¸å¥½åœ¨ Oracle JDK 8u20 ä¹‹åï¼Œæ¨å‡ºäº†ä¸€ä¸ªæ–°çš„ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯ G1 GC ä¸‹çš„å­—ç¬¦ä¸²æ’é‡ã€‚å®ƒæ˜¯é€šè¿‡å°†ç›¸åŒæ•°æ®çš„å­—ç¬¦ä¸²æŒ‡å‘åŒä¸€ä»½æ•°æ®æ¥åšåˆ°çš„ï¼Œæ˜¯ JVM åº•å±‚çš„æ”¹å˜ï¼Œå¹¶ä¸éœ€è¦ Java ç±»åº“åšä»€ä¹ˆä¿®æ”¹ã€‚</p>
<p>æ³¨æ„è¿™ä¸ªåŠŸèƒ½ç›®å‰æ˜¯é»˜è®¤å…³é—­çš„ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸‹é¢å‚æ•°å¼€å¯ï¼Œå¹¶ä¸”è®°å¾—æŒ‡å®šä½¿ç”¨ G1 GCï¼š</p>
<pre><code>-XX:+UseStringDeduplication

</code></pre>
<p>å‰é¢è¯´åˆ°çš„å‡ ä¸ªæ–¹é¢ï¼Œåªæ˜¯ Java åº•å±‚å¯¹å­—ç¬¦ä¸²å„ç§ä¼˜åŒ–çš„ä¸€è§’ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œå­—ç¬¦ä¸²çš„ä¸€äº›åŸºç¡€æ“ä½œä¼šç›´æ¥åˆ©ç”¨ JVM å†…éƒ¨çš„ Intrinsic æœºåˆ¶ï¼Œå¾€å¾€è¿è¡Œçš„å°±æ˜¯ç‰¹æ®Šä¼˜åŒ–çš„æœ¬åœ°ä»£ç ï¼Œè€Œæ ¹æœ¬å°±ä¸æ˜¯ Java ä»£ç ç”Ÿæˆçš„å­—èŠ‚ç ã€‚Intrinsic å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œæ˜¯ä¸€ç§åˆ©ç”¨ native æ–¹å¼ hard-coded çš„é€»è¾‘ï¼Œç®—æ˜¯ä¸€ç§ç‰¹åˆ«çš„å†…è”ï¼Œå¾ˆå¤šä¼˜åŒ–è¿˜æ˜¯éœ€è¦ç›´æ¥ä½¿ç”¨ç‰¹å®šçš„ CPU æŒ‡ä»¤ï¼Œå…·ä½“å¯ä»¥çœ‹ç›¸å…³<a href="http://hg.openjdk.java.net/jdk/jdk/file/44b64fc0baa3/src/hotspot/share/classfile/vmSymbols.hpp">æºç </a>ï¼Œæœç´¢â€œstringâ€ä»¥æŸ¥æ‰¾ç›¸å…³ Intrinsic å®šä¹‰ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å¯åŠ¨å®éªŒåº”ç”¨æ—¶ï¼Œä½¿ç”¨ä¸‹é¢å‚æ•°ï¼Œäº†è§£ intrinsic å‘ç”Ÿçš„çŠ¶æ€ã€‚</p>
<pre><code>-XX:+PrintCompilation -XX:+UnlockDiagnosticVMOptions -XX:+PrintInlining
    // æ ·ä¾‹è¾“å‡ºç‰‡æ®µ    
        180    3       3       java.lang.String::charAt (25 bytes)  
                                  @ 1   java.lang.String::isLatin1 (19 bytes)   
                                  ...  
                                  @ 7 java.lang.StringUTF16::getChar (60 bytes) intrinsic 
</code></pre>
<p>å¯ä»¥çœ‹å‡ºï¼Œä»…ä»…æ˜¯å­—ç¬¦ä¸²ä¸€ä¸ªå®ç°ï¼Œå°±éœ€è¦ Java å¹³å°å·¥ç¨‹å¸ˆå’Œç§‘å­¦å®¶ä»˜å‡ºå¦‚æ­¤å¤§ä¸”é»˜é»˜æ— é—»çš„åŠªåŠ›ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å¾ˆå¤šä¾¿åˆ©éƒ½æ˜¯æ¥æºäºæ­¤ã€‚</p>
<p>æˆ‘ä¼šåœ¨ä¸“æ åé¢çš„ JVM å’Œæ€§èƒ½ç­‰ä¸»é¢˜ï¼Œè¯¦ç»†ä»‹ç» JVM å†…éƒ¨ä¼˜åŒ–çš„ä¸€äº›æ–¹æ³•ï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥å†æ·±å…¥å­¦ä¹ ã€‚å³ä½¿ä½ ä¸åš JVM å¼€å‘æˆ–è€…æš‚æ—¶è¿˜æ²¡æœ‰ä½¿ç”¨åˆ°ç‰¹åˆ«çš„æ€§èƒ½ä¼˜åŒ–ï¼Œè¿™äº›çŸ¥è¯†ä¹Ÿèƒ½å¸®åŠ©ä½ å¢åŠ æŠ€æœ¯æ·±åº¦ã€‚</p>
<p>3.String è‡ªèº«çš„æ¼”åŒ–</p>
<p>å¦‚æœä½ ä»”ç»†è§‚å¯Ÿè¿‡ Java çš„å­—ç¬¦ä¸²ï¼Œåœ¨å†å²ç‰ˆæœ¬ä¸­ï¼Œå®ƒæ˜¯ä½¿ç”¨ char æ•°ç»„æ¥å­˜æ•°æ®çš„ï¼Œè¿™æ ·éå¸¸ç›´æ¥ã€‚ä½†æ˜¯ Java ä¸­çš„ char æ˜¯ä¸¤ä¸ª bytes å¤§å°ï¼Œæ‹‰ä¸è¯­ç³»è¯­è¨€çš„å­—ç¬¦ï¼Œæ ¹æœ¬å°±ä¸éœ€è¦å¤ªå®½çš„ charï¼Œè¿™æ ·æ— åŒºåˆ«çš„å®ç°å°±é€ æˆäº†ä¸€å®šçš„æµªè´¹ã€‚å¯†åº¦æ˜¯ç¼–ç¨‹è¯­è¨€å¹³å°æ°¸æ’çš„è¯é¢˜ï¼Œå› ä¸ºå½’æ ¹ç»“åº•ç»å¤§éƒ¨åˆ†ä»»åŠ¡æ˜¯è¦æ¥æ“ä½œæ•°æ®çš„ã€‚</p>
<p>å…¶å®åœ¨ Java 6 çš„æ—¶å€™ï¼ŒOracle JDK å°±æä¾›äº†å‹ç¼©å­—ç¬¦ä¸²çš„ç‰¹æ€§ï¼Œä½†æ˜¯è¿™ä¸ªç‰¹æ€§çš„å®ç°å¹¶ä¸æ˜¯å¼€æºçš„ï¼Œè€Œä¸”åœ¨å®è·µä¸­ä¹Ÿæš´éœ²å‡ºäº†ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥åœ¨æœ€æ–°çš„ JDK ç‰ˆæœ¬ä¸­å·²ç»å°†å®ƒç§»é™¤äº†ã€‚</p>
<p>åœ¨ Java 9 ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº† Compact Strings çš„è®¾è®¡ï¼Œå¯¹å­—ç¬¦ä¸²è¿›è¡Œäº†å¤§åˆ€é˜”æ–§çš„æ”¹è¿›ã€‚å°†æ•°æ®å­˜å‚¨æ–¹å¼ä» char æ•°ç»„ï¼Œæ”¹å˜ä¸ºä¸€ä¸ª byte æ•°ç»„åŠ ä¸Šä¸€ä¸ªæ ‡è¯†ç¼–ç çš„æ‰€è°“ coderï¼Œå¹¶ä¸”å°†ç›¸å…³å­—ç¬¦ä¸²æ“ä½œç±»éƒ½è¿›è¡Œäº†ä¿®æ”¹ã€‚å¦å¤–ï¼Œæ‰€æœ‰ç›¸å…³çš„ Intrinsic ä¹‹ç±»ä¹Ÿéƒ½è¿›è¡Œäº†é‡å†™ï¼Œä»¥ä¿è¯æ²¡æœ‰ä»»ä½•æ€§èƒ½æŸå¤±ã€‚</p>
<p>è™½ç„¶åº•å±‚å®ç°å‘ç”Ÿäº†è¿™ä¹ˆå¤§çš„æ”¹å˜ï¼Œä½†æ˜¯ Java å­—ç¬¦ä¸²çš„è¡Œä¸ºå¹¶æ²¡æœ‰ä»»ä½•å¤§çš„å˜åŒ–ï¼Œæ‰€ä»¥è¿™ä¸ªç‰¹æ€§å¯¹äºç»å¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´æ˜¯é€æ˜çš„ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µä¸éœ€è¦ä¿®æ”¹å·²æœ‰ä»£ç ã€‚</p>
<p>å½“ç„¶ï¼Œåœ¨æç«¯æƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²ä¹Ÿå‡ºç°äº†ä¸€äº›èƒ½åŠ›é€€åŒ–ï¼Œæ¯”å¦‚æœ€å¤§å­—ç¬¦ä¸²çš„å¤§å°ã€‚ä½ å¯ä»¥æ€è€ƒä¸‹ï¼ŒåŸæ¥ char æ•°ç»„çš„å®ç°ï¼Œå­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦å°±æ˜¯æ•°ç»„æœ¬èº«çš„é•¿åº¦é™åˆ¶ï¼Œä½†æ˜¯æ›¿æ¢æˆ byte æ•°ç»„ï¼ŒåŒæ ·æ•°ç»„é•¿åº¦ä¸‹ï¼Œå­˜å‚¨èƒ½åŠ›æ˜¯é€€åŒ–äº†ä¸€å€çš„ï¼è¿˜å¥½è¿™æ˜¯å­˜åœ¨äºç†è®ºä¸­çš„æé™ï¼Œè¿˜æ²¡æœ‰å‘ç°ç°å®åº”ç”¨å—æ­¤å½±å“ã€‚</p>
<p>åœ¨é€šç”¨çš„æ€§èƒ½æµ‹è¯•å’Œäº§å“å®éªŒä¸­ï¼Œæˆ‘ä»¬èƒ½éå¸¸æ˜æ˜¾åœ°çœ‹åˆ°ç´§å‡‘å­—ç¬¦ä¸²å¸¦æ¥çš„ä¼˜åŠ¿ï¼Œ<strong>å³æ›´å°çš„å†…å­˜å ç”¨ã€æ›´å¿«çš„æ“ä½œé€Ÿåº¦</strong>ã€‚</p>
<p>ä»Šå¤©æˆ‘ä» Stringã€StringBuffer å’Œ StringBuilder çš„ä¸»è¦è®¾è®¡å’Œå®ç°ç‰¹ç‚¹å¼€å§‹ï¼Œåˆ†æäº†å­—ç¬¦ä¸²ç¼“å­˜çš„ intern æœºåˆ¶ã€éä»£ç ä¾µå…¥æ€§çš„è™šæ‹Ÿæœºå±‚é¢æ’é‡ã€Java 9 ä¸­ç´§å‡‘å­—ç¬¦çš„æ”¹è¿›ï¼Œå¹¶ä¸”åˆæ­¥æ¥è§¦äº† JVM çš„åº•å±‚ä¼˜åŒ–æœºåˆ¶ intrinsicã€‚ä»å®è·µçš„è§’åº¦ï¼Œä¸ç®¡æ˜¯ Compact Strings è¿˜æ˜¯åº•å±‚ intrinsic ä¼˜åŒ–ï¼Œéƒ½è¯´æ˜äº†ä½¿ç”¨ Java åŸºç¡€ç±»åº“çš„ä¼˜åŠ¿ï¼Œå®ƒä»¬å¾€å¾€èƒ½å¤Ÿå¾—åˆ°æœ€å¤§ç¨‹åº¦ã€æœ€é«˜è´¨é‡çš„ä¼˜åŒ–ï¼Œè€Œä¸”åªè¦å‡çº§ JDK ç‰ˆæœ¬ï¼Œå°±èƒ½é›¶æˆæœ¬åœ°äº«å—è¿™äº›ç›Šå¤„ã€‚</p>
<h2>ä¸€è¯¾ä¸€ç»ƒ</h2>
<p>å…³äºä»Šå¤©æˆ‘ä»¬è®¨è®ºçš„é¢˜ç›®ä½ åšåˆ°å¿ƒä¸­æœ‰æ•°äº†å—ï¼Ÿé™äºç¯‡å¹…æœ‰é™ï¼Œè¿˜æœ‰å¾ˆå¤šå­—ç¬¦ç›¸å…³çš„é—®é¢˜æ²¡æœ‰æ¥å¾—åŠè®¨è®ºï¼Œæ¯”å¦‚ç¼–ç ç›¸å…³çš„é—®é¢˜ã€‚å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œå¾ˆå¤šå­—ç¬¦ä¸²æ“ä½œï¼Œæ¯”å¦‚ getBytes()/<a href="https://docs.oracle.com/javase/9/docs/api/java/lang/String.html#String-byte:A-">String</a>â€‹(byte[] bytes) ç­‰éƒ½æ˜¯éšå«ç€ä½¿ç”¨å¹³å°é»˜è®¤ç¼–ç ï¼Œè¿™æ˜¯ä¸€ç§å¥½çš„å®è·µå—ï¼Ÿæ˜¯å¦æœ‰åˆ©äºé¿å…ä¹±ç ï¼Ÿ</p>
<p>è¯·ä½ åœ¨ç•™è¨€åŒºå†™å†™ä½ å¯¹è¿™ä¸ªé—®é¢˜çš„æ€è€ƒï¼Œæˆ–è€…åˆ†äº«ä¸€ä¸‹ä½ åœ¨æ“ä½œå­—ç¬¦ä¸²æ—¶æ‰è¿‡çš„å‘ï¼Œæˆ‘ä¼šé€‰å‡ºç»è¿‡è®¤çœŸæ€è€ƒçš„ç•™è¨€ï¼Œé€ç»™ä½ ä¸€ä»½å­¦ä¹ é¼“åŠ±é‡‘ï¼Œæ¬¢è¿ä½ ä¸æˆ‘ä¸€èµ·è®¨è®ºã€‚</p>
<p>ä½ çš„æœ‹å‹æ˜¯ä¸æ˜¯ä¹Ÿåœ¨å‡†å¤‡é¢è¯•å‘¢ï¼Ÿä½ å¯ä»¥â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„é¢˜ç›®åˆ†äº«ç»™å¥½å‹ï¼Œæˆ–è®¸ä½ èƒ½å¸®åˆ°ä»–ã€‚</p>
<p><img src="https://static001.geekbang.org/resource/image/25/46/256537f3a62681bd19ebf75f9cf79146.jpg" alt=""></p>
</div></div> <p data-v-87ffcada="" style="color: rgb(153, 153, 153);">
        ç‰ˆæƒå½’æå®¢é‚¦ç§‘æŠ€æ‰€æœ‰ï¼Œæœªç»è®¸å¯ä¸å¾—è½¬è½½
      </p></div> <div data-v-87ffcada="" class="article-comments"><h2 data-v-87ffcada=""><span data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2> <ul data-v-87ffcada=""><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/9d/3b/05b4d418.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">Bin</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>10</span></a></div></div> <div class="bd">jdk1.8ä¸­ï¼Œstringæ˜¯æ ‡å‡†çš„ä¸å¯å˜ç±»ï¼Œä½†å…¶hashå€¼æ²¡æœ‰ç”¨finalä¿®é¥°ï¼Œå…¶hashå€¼è®¡ç®—æ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨hashcodeæ–¹æ³•æ—¶è®¡ç®—ï¼Œä½†æ–¹æ³•æ²¡æœ‰åŠ é”ï¼Œå˜é‡ä¹Ÿæ²¡ç”¨volatileå…³é”®å­—ä¿®é¥°å°±æ— æ³•ä¿è¯å…¶å¯è§æ€§ã€‚å½“æœ‰å¤šä¸ªçº¿ç¨‹è°ƒç”¨çš„æ—¶å€™ï¼Œhashå€¼å¯èƒ½ä¼šè¢«è®¡ç®—å¤šæ¬¡ï¼Œè™½ç„¶ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†jdkçš„ä½œè€…ä¸ºä»€ä¹ˆä¸å°†å…¶ä¼˜åŒ–ä¸€ä¸‹å‘¢ï¼Ÿ</div> <span class="time">2018-05-16</span> <div class="reply"><div class="reply-hd"><i class="iconfont">î˜ˆ</i> <span>ä½œè€…å›å¤</span></div> <p class="reply-content">è¿™äº›â€œä¼˜åŒ–â€åœ¨é€šç”¨åœºæ™¯å¯èƒ½å˜æˆæŒç»­çš„æˆæœ¬ï¼Œvolatile readæ˜¯æœ‰æ˜æ˜¾å¼€é”€çš„ï¼›<br>å¦‚æœå†²çªå¹¶ä¸å¤šè§ï¼Œreadæ‰æ˜¯æ›´æ™®éçš„ï¼Œç®€å•çš„cacheæ˜¯æ›´é«˜æ•ˆçš„</p> <p class="reply-time">2018-05-17</p></div></div></li><li data-v-87ffcada="" class="comment-item"><img src="http://wx.qlogo.cn/mmhead/PiajxSqBRaEIaDzFsxT6fBI3iaKkHogOQCoicsQ696dsaybxg8TicjKFeQ/0" class="avatar"> <div class="info"><div class="hd"><span class="username">å…¬å·-Javaå¤§åç«¯</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>118</span></a></div></div> <div class="bd">ä»Šæ—¥String/StringBuffer/StringBuilderå¿ƒå¾—:<br><br><br>1 String<br><br>(1) Stringçš„åˆ›å»ºæœºç†<br>ç”±äºStringåœ¨Javaä¸–ç•Œä¸­ä½¿ç”¨è¿‡äºé¢‘ç¹ï¼ŒJavaä¸ºäº†é¿å…åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­äº§ç”Ÿå¤§é‡çš„Stringå¯¹è±¡ï¼Œå¼•å…¥äº†å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚å…¶è¿è¡Œæœºåˆ¶æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥æ± ä¸­æ˜¯å¦æœ‰å€¼ç›¸åŒçš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦‚æœæœ‰åˆ™ä¸éœ€è¦åˆ›å»ºç›´æ¥ä»æ± ä¸­åˆšæŸ¥æ‰¾åˆ°çš„å¯¹è±¡å¼•ç”¨ï¼›å¦‚æœæ²¡æœ‰åˆ™æ–°å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡å¼•ç”¨ï¼Œå¹¶ä¸”å°†æ–°åˆ›å»ºçš„å¯¹è±¡æ”¾å…¥æ± ä¸­ã€‚ä½†æ˜¯ï¼Œé€šè¿‡newæ–¹æ³•åˆ›å»ºçš„Stringå¯¹è±¡æ˜¯ä¸æ£€æŸ¥å­—ç¬¦ä¸²æ± çš„ï¼Œè€Œæ˜¯ç›´æ¥åœ¨å †åŒºæˆ–æ ˆåŒºåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¹Ÿä¸ä¼šæŠŠå¯¹è±¡æ”¾å…¥æ± ä¸­ã€‚ä¸Šè¿°åŸåˆ™åªé€‚ç”¨äºé€šè¿‡ç›´æ¥é‡ç»™Stringå¯¹è±¡å¼•ç”¨èµ‹å€¼çš„æƒ…å†µã€‚<br><br>ä¸¾ä¾‹ï¼šString str1 = "123"; //é€šè¿‡ç›´æ¥é‡èµ‹å€¼æ–¹å¼ï¼Œæ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± <br>String str2 = new String(â€œ123â€);//é€šè¿‡newæ–¹å¼èµ‹å€¼æ–¹å¼ï¼Œä¸æ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± <br><br>æ³¨æ„ï¼šStringæä¾›äº†inter()æ–¹æ³•ã€‚è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå¦‚æœå¸¸é‡æ± ä¸­åŒ…æ‹¬äº†ä¸€ä¸ªç­‰äºæ­¤Stringå¯¹è±¡çš„å­—ç¬¦ä¸²ï¼ˆç”±equalsæ–¹æ³•ç¡®å®šï¼‰ï¼Œåˆ™è¿”å›æ± ä¸­çš„å­—ç¬¦ä¸²ã€‚å¦åˆ™ï¼Œå°†æ­¤Stringå¯¹è±¡æ·»åŠ åˆ°æ± ä¸­ï¼Œå¹¶ä¸”è¿”å›æ­¤æ± ä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚<br><br><br>(2) Stringçš„ç‰¹æ€§<br>[A] ä¸å¯å˜ã€‚æ˜¯æŒ‡Stringå¯¹è±¡ä¸€æ—¦ç”Ÿæˆï¼Œåˆ™ä¸èƒ½å†å¯¹å®ƒè¿›è¡Œæ”¹å˜ã€‚ä¸å¯å˜çš„ä¸»è¦ä½œç”¨åœ¨äºå½“ä¸€ä¸ªå¯¹è±¡éœ€è¦è¢«å¤šçº¿ç¨‹å…±äº«ï¼Œå¹¶ä¸”è®¿é—®é¢‘ç¹æ—¶ï¼Œå¯ä»¥çœç•¥åŒæ­¥å’Œé”ç­‰å¾…çš„æ—¶é—´ï¼Œä»è€Œå¤§å¹…åº¦æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ä¸å¯å˜æ¨¡å¼æ˜¯ä¸€ä¸ªå¯ä»¥æé«˜å¤šçº¿ç¨‹ç¨‹åºçš„æ€§èƒ½ï¼Œé™ä½å¤šçº¿ç¨‹ç¨‹åºå¤æ‚åº¦çš„è®¾è®¡æ¨¡å¼ã€‚<br><br>[B] é’ˆå¯¹å¸¸é‡æ± çš„ä¼˜åŒ–ã€‚å½“2ä¸ªStringå¯¹è±¡æ‹¥æœ‰ç›¸åŒçš„å€¼æ—¶ï¼Œä»–ä»¬åªå¼•ç”¨å¸¸é‡æ± ä¸­çš„åŒä¸€ä¸ªæ‹·è´ã€‚å½“åŒä¸€ä¸ªå­—ç¬¦ä¸²åå¤å‡ºç°æ—¶ï¼Œè¿™ä¸ªæŠ€æœ¯å¯ä»¥å¤§å¹…åº¦èŠ‚çœå†…å­˜ç©ºé—´ã€‚<br><br>2 StringBuffer/StringBuilder<br><br>StringBufferå’ŒStringBuilderéƒ½å®ç°äº†AbstractStringBuilderæŠ½è±¡ç±»ï¼Œæ‹¥æœ‰å‡ ä¹ä¸€è‡´å¯¹å¤–æä¾›çš„è°ƒç”¨æ¥å£ï¼›å…¶åº•å±‚åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ä¸Stringç›¸åŒï¼Œéƒ½æ˜¯ä»¥ä¸€ä¸ªæœ‰åºçš„å­—ç¬¦åºåˆ—ï¼ˆcharç±»å‹çš„æ•°ç»„ï¼‰è¿›è¡Œå­˜å‚¨ï¼Œä¸åŒç‚¹æ˜¯StringBuffer/StringBuilderå¯¹è±¡çš„å€¼æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œå¹¶ä¸”å€¼æ”¹å˜ä»¥åï¼Œå¯¹è±¡å¼•ç”¨ä¸ä¼šå‘ç”Ÿæ”¹å˜;ä¸¤è€…å¯¹è±¡åœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆæŒ‰ç…§é»˜è®¤å¤§å°ç”³è¯·ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œç”±äºä¼šä¸æ–­åŠ å…¥æ–°æ•°æ®ï¼Œå½“è¶…è¿‡é»˜è®¤å¤§å°åï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå¹¶å°†åŸå…ˆçš„æ•°ç»„å†…å®¹å¤åˆ¶è¿‡æ¥ï¼Œå†ä¸¢å¼ƒæ—§çš„æ•°ç»„ã€‚å› æ­¤ï¼Œå¯¹äºè¾ƒå¤§å¯¹è±¡çš„æ‰©å®¹ä¼šæ¶‰åŠå¤§é‡çš„å†…å­˜å¤åˆ¶æ“ä½œï¼Œå¦‚æœèƒ½å¤Ÿé¢„å…ˆè¯„ä¼°å¤§å°ï¼Œå¯æå‡æ€§èƒ½ã€‚<br><br>å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼šStringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯StringBuilderæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚å¯å‚çœ‹Javaæ ‡å‡†ç±»åº“çš„æºä»£ç ï¼ŒStringBufferç±»ä¸­æ–¹æ³•å®šä¹‰å‰é¢éƒ½ä¼šæœ‰synchronizeå…³é”®å­—ã€‚ä¸ºæ­¤ï¼ŒStringBufferçš„æ€§èƒ½è¦è¿œä½äºStringBuilderã€‚<br><br><br>3 åº”ç”¨åœºæ™¯	<br><br>[A]åœ¨å­—ç¬¦ä¸²å†…å®¹ä¸ç»å¸¸å‘ç”Ÿå˜åŒ–çš„ä¸šåŠ¡åœºæ™¯ä¼˜å…ˆä½¿ç”¨Stringç±»ã€‚ä¾‹å¦‚ï¼šå¸¸é‡å£°æ˜ã€å°‘é‡çš„å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œç­‰ã€‚å¦‚æœæœ‰å¤§é‡çš„å­—ç¬¦ä¸²å†…å®¹æ‹¼æ¥ï¼Œé¿å…ä½¿ç”¨Stringä¸Stringä¹‹é—´çš„â€œ+â€æ“ä½œï¼Œå› ä¸ºè¿™æ ·ä¼šäº§ç”Ÿå¤§é‡æ— ç”¨çš„ä¸­é—´å¯¹è±¡ï¼Œè€—è´¹ç©ºé—´ä¸”æ‰§è¡Œæ•ˆç‡ä½ä¸‹ï¼ˆæ–°å»ºå¯¹è±¡ã€å›æ”¶å¯¹è±¡èŠ±è´¹å¤§é‡æ—¶é—´ï¼‰ã€‚<br><br>[B]åœ¨é¢‘ç¹è¿›è¡Œå­—ç¬¦ä¸²çš„è¿ç®—ï¼ˆå¦‚æ‹¼æ¥ã€æ›¿æ¢ã€åˆ é™¤ç­‰ï¼‰ï¼Œå¹¶ä¸”è¿è¡Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå»ºè®®ä½¿ç”¨StringBufferï¼Œä¾‹å¦‚XMLè§£æã€HTTPå‚æ•°è§£æä¸å°è£…ã€‚<br><br>[C]åœ¨é¢‘ç¹è¿›è¡Œå­—ç¬¦ä¸²çš„è¿ç®—ï¼ˆå¦‚æ‹¼æ¥ã€æ›¿æ¢ã€åˆ é™¤ç­‰ï¼‰ï¼Œå¹¶ä¸”è¿è¡Œåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå»ºè®®ä½¿ç”¨StringBuilderï¼Œä¾‹å¦‚SQLè¯­å¥æ‹¼è£…ã€JSONå°è£…ç­‰ã€‚</div> <span class="time">2018-05-15</span> <div class="reply"><div class="reply-hd"><i class="iconfont">î˜ˆ</i> <span>ä½œè€…å›å¤</span></div> <p class="reply-content">å¾ˆåˆ°ä½</p> <p class="reply-time">2018-05-15</p></div></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/01/5e/95f7d928.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">Hidden</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>35</span></a></div></div> <div class="bd">å…¬å¸æ²¡æœ‰æŠ€æœ¯æ°›å›´ï¼Œé¡¹ç›®ä¹Ÿåªæ˜¯ åŠŸèƒ½å®ç°å°±å¥½ï¼Œä¸æ¶‰åŠä¼˜åŒ–ï¼ŒæŠ€æœ¯ä¹Ÿåªæ˜¯ä¼ ç»ŸæŠ€æœ¯ï¼Œæƒ³ç¦»èŒï¼Œä½†åˆæ€•è£¸è¾åçš„å„ç§å‹åŠ›</div> <span class="time">2018-05-16</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/cc/80/898c1ed1.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">seaå­£é™ªæˆ‘å»çœ‹æµ·</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>17</span></a></div></div> <div class="bd">ä½œè€…æˆ‘æœ‰ä¸ªç–‘é—®ï¼ŒString myStr = "aa" + "bb" + "cc" + "dd";   åº”è¯¥ç¼–è¯‘çš„æ—¶å€™å°±ç¡®å®šäº†ï¼Œä¸ä¼šç”¨åˆ°StringBuilderã€‚ç†ç”±æ˜¯ï¼š<br>String myStr = "aa" + "bb" + "cc" + "dd";   <br>String h =aabbccdd<br>Mystr ==h  ä¸Šæœºå®æµ‹è¿”å›çš„æ˜¯trueï¼Œå¦‚æœæŒ‰ç…§ä½ çš„è¯´æ³•ï¼Œåº”è¯¥æ˜¯è¿”å›falseæ‰å¯¹ï¼Œå› ä¸ºä½ è¯´æ‹¼æ¥ç”¨åˆ°stringbuilderï¼Œé‚£mystråº”è¯¥æ˜¯å †åœ°å€ï¼Œhæ˜¯å¸¸äº®æ± åœ°å€ã€‚</div> <span class="time">2018-05-16</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/52/63/a58ae0ab.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">Kongk0ng</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>15</span></a></div></div> <div class="bd">ç¼–è¯‘å™¨ä¸ºä»€ä¹ˆä¸æŠŠ <br>String myStr = "aa" + "bb" + "cc" + "dd";  <br>é»˜è®¤ä¼˜åŒ–æˆ<br>String myStr = "aabbccdd";<br>è¿™æ ·ä¸æ˜¯æ›´èªæ˜å˜›</div> <span class="time">2018-05-16</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/ac/00/db92d343.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">æ„‰æ‚¦åœ¨èŠ±é¦™çš„æ—¥å­é‡Œ</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>10</span></a></div></div> <div class="bd">getByteså’ŒStringç›¸å…³çš„è½¬æ¢æ—¶æ ¹æ®ä¸šåŠ¡éœ€è¦å»ºè®®æŒ‡å®šç¼–ç æ–¹å¼ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™çœ‹çœ‹JVMå‚æ•°é‡Œæœ‰æ²¡æœ‰æŒ‡å®šfile.encodingå‚æ•°ï¼Œå¦‚æœJVMæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä½¿ç”¨çš„é»˜è®¤ç¼–ç å°±æ˜¯è¿è¡Œçš„æ“ä½œç³»ç»Ÿç¯å¢ƒçš„ç¼–ç äº†ï¼Œé‚£è¿™ä¸ªç¼–ç å°±å˜å¾—ä¸ç¡®å®šäº†ã€‚å¸¸è§çš„ç¼–ç iso8859-1æ˜¯å•å­—èŠ‚ç¼–ç ï¼ŒUTF-8æ˜¯å˜é•¿çš„ç¼–ç ã€‚</div> <span class="time">2018-05-15</span> <div class="reply"><div class="reply-hd"><i class="iconfont">î˜ˆ</i> <span>ä½œè€…å›å¤</span></div> <p class="reply-content">ä¸é”™ï¼Œè«ä¾èµ–äºä¸ç¡®å®šå› ç´ </p> <p class="reply-time">2018-05-15</p></div></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/fc/e5/605f423f.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">è‚–ä¸€æ—</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>7</span></a></div></div> <div class="bd">è¿™ç¯‡æ–‡ç« å†™çš„ä¸é”™ï¼Œç”±æµ…å…¥æ·±ï¼ŒæŠŠæ¥é¾™å»è„‰å†™æ¸…æ¥šäº†</div> <span class="time">2018-05-15</span> <div class="reply"><div class="reply-hd"><i class="iconfont">î˜ˆ</i> <span>ä½œè€…å›å¤</span></div> <p class="reply-content">è°¢è°¢è®¤å¯</p> <p class="reply-time">2018-05-15</p></div></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">Jerryé“¶é“¶</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>6</span></a></div></div> <div class="bd">è¦å®Œå…¨æ¶ˆåŒ–ä¸€ç¯‡æ–‡ç« çš„æ‰€æœ‰å†…å®¹ï¼ŒçœŸå¾—ä¸æ˜¯ä¸€å¤©å°±èƒ½æå®šçš„ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªæœˆï¼Œç”šè‡³å¥½å‡ ä¸ªæœˆã€‚å°±æ¯”å¦‚ä»Šå¤©çš„å­—ç¬¦ä¸²ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªè¯é¢˜è¦†ç›–çš„é¢å¤ªå¹¿ï¼šç®—æ³•è§’åº¦ï¼›æ˜“ç”¨è§’åº¦ï¼›æ€§èƒ½è§’åº¦ï¼›ç¼–ç ä¼ è¾“è§’åº¦ç­‰<br><br>ä½†æ˜¯å¥½åœ¨ï¼Œæˆ‘è·å¾—è§è¯†ã€‚æ¥ä¸‹æ¥ï¼ŒèŠ±æ—¶é—´æ…¢æ…¢ç ”ç©¶å‘—ï¼Œè¿å¤§å¸ˆä»¬éƒ½èŠ±äº†é‚£ä¹ˆå¤šæ—¶é—´ç ”ç©¶ï¼Œæˆ‘ä»¬å¤šèŠ±ç‚¹æ—¶é—´ï¼Œå¾ˆæ­£å¸¸å˜›ğŸ˜„<br><br>ä¸€ç‚¹å­¦ä¹ å¿ƒå¾—ï¼Œå’Œå¤§å®¶åˆ†äº«</div> <span class="time">2018-05-15</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/63/14/06eff9a4.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">Jerryé“¶é“¶</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>6</span></a></div></div> <div class="bd">ç‰¹åˆ«å–œæ¬¢è¿™å¥è¯ï¼šâ€œä»…ä»…æ˜¯å­—ç¬¦ä¸²ä¸€ä¸ªå®ç°ï¼Œå°±éœ€è¦ Java å¹³å°å·¥ç¨‹å¸ˆå’Œç§‘å­¦å®¶ä»˜å‡ºå¦‚æ­¤å¤§ä¸”é»˜é»˜æ— é—»çš„åŠªåŠ›ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å¾ˆå¤šä¾¿åˆ©éƒ½æ˜¯æ¥æºäºæ­¤ã€‚â€<br><br>æˆ‘æƒ³è¯´ï¼ŒåŒå­¦ä»¬ï¼Œå†™ä»£ç çš„æ—¶å€™è®°å¾—æ„Ÿæ©å“¦ğŸ˜„<br><br>å¯¹äºå­—ç¬¦ä¸²çš„ç ”ç©¶ï¼Œæˆ‘è§‰å¾—èƒ½å¾ˆå¥½çš„ç†è§£è®¡ç®—æœºçš„æœ¬è´¨å’Œè®­ç»ƒè®¡ç®—æœºæ€ç»´ï¼Œæå‡è‡ªå·±è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚<br><br>å°å°çš„å­—ç¬¦ä¸²æœ‰ç€è¯¸å¤šå·¨äººçš„å½±å­</div> <span class="time">2018-05-15</span> <div class="reply"><div class="reply-hd"><i class="iconfont">î˜ˆ</i> <span>ä½œè€…å›å¤</span></div> <p class="reply-content">éå¸¸æ„Ÿè°¢</p> <p class="reply-time">2018-05-15</p></div></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/ad/4d/e24fc9e4.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">æ˜ç¿¼</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>5</span></a></div></div> <div class="bd">å›ç­”ä¸€ä¸‹ä¸Šé¢ä¸€ä¸ªäººçš„é—®é¢˜ï¼Œé—®é¢˜æ˜¯â€œâ€String s3 = new String("12") + new String("34");<br>s3.intern();<br>String s4 = "1234";<br>System.out.println(s3 == s4);//true<br><br>æ±‚è§£,ä¸ºä»€ä¹ˆåœ¨ç¬¬äºŒæ®µæ¯”è¾ƒä¸­ä¼šè¿”å›true,ä»å­—èŠ‚ç çœ‹s3åº”è¯¥å°±æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªstringbuilderå¯¹è±¡å®Œæˆè¿æ¥æ“ä½œåæ‰§è¡Œäº†toString, s3ä¸æ˜¯åº”è¯¥ä»ç„¶æ˜¯å †å†…çš„å¯¹è±¡åœ°å€å—?ä¸ºä»€ä¹ˆä¼šå’Œå¸¸é‡æ± ä¸­çš„åœ°å€ç›¸ç­‰?â€œâ€<br><br><br><br>æˆ‘ä¹‹å‰ä¹Ÿæ˜¯ä¸æ˜ç™½s3ä¸ºä»€ä¹ˆç­‰äºs4ï¼ŒæŸ¥äº†ä¸‹èµ„æ–™ï¼Œè¯´æ˜¯åœ¨jdk1.7ä¹‹åï¼Œå¦‚æœå­—ç¬¦ä¸²åœ¨å †ä¸­æœ‰å®ä¾‹ï¼Œé‚£internæ–¹æ³•å°±ä¼šæŠŠè¿™ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨æ”¾åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œï¼Œæ‰€ä»¥ï¼ŒString s3 = new String("12") + new String("34");è¿™é‡Œåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œæ”¾äº†ä¸€ä¸ªå­—ç¬¦ä¸²â€œ12â€ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²â€œ34â€ï¼Œåœ¨å †é‡Œå­˜æ”¾ä»–ä»¬çš„è¿ç®—ç»“æœâ€œ1234â€ï¼Œç„¶åæŠŠâ€œ1234â€çš„å¼•ç”¨è¿”å›ç»™s3ï¼Œ<br>s3.intern()è¿™æ®µä»£ç è¿è¡Œæ—¶ï¼Œjvmåœ¨å †é‡Œå…ˆåˆ°äº†å­—ç¬¦ä¸²â€œ1234â€ï¼Œæ‰€ä»¥å°±ä¼šæŠŠä»–çš„å¼•ç”¨æ”¾åˆ°å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œï¼Œè¿™ä¸ªå¼•ç”¨å’Œs3ç›¸ç­‰ï¼Œ<br>String s4 = "1234";è¿™ä¸ªä»£ç æ—¶ï¼Œä¼šæŠŠå­—ç¬¦ä¸²å¸¸é‡æ± é‡Œâ€œ1234â€çš„å¼•ç”¨è¿”å›ç»™s4ï¼Œæ‰€ä»¥s3æ˜¯ç­‰äºs4çš„ï¼Œ<br><br><br>ä¸ªäººç†è§£ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œè¯·æŒ‡æ­£ï¼Œè°¢è°¢ğŸ˜œ</div> <span class="time">2018-06-25</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/ff/51/6efa3514.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">è–›å¥½è¿</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>5</span></a></div></div> <div class="bd">è€å¸ˆï¼Œå¯ä»¥è®²è§£è¿™ä¸€å¥è¯çš„å…·ä½“å«ä¹‰å—ï¼Œè°¢è°¢ï¼<br>ä½ å¯ä»¥æ€è€ƒä¸‹ï¼ŒåŸæ¥ char æ•°ç»„çš„å®ç°ï¼Œå­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦å°±æ˜¯æ•°ç»„æœ¬èº«çš„é•¿åº¦é™åˆ¶ï¼Œä½†æ˜¯æ›¿æ¢æˆ byte æ•°ç»„ï¼ŒåŒæ ·æ•°ç»„é•¿åº¦ä¸‹ï¼Œå­˜å‚¨èƒ½åŠ›æ˜¯é€€åŒ–äº†ä¸€å€çš„ï¼è¿˜å¥½è¿™æ˜¯å­˜åœ¨äºç†è®ºä¸­çš„æé™ï¼Œè¿˜æ²¡æœ‰å‘ç°ç°å®åº”ç”¨å—æ­¤å½±å“ã€‚</div> <span class="time">2018-05-15</span> <div class="reply"><div class="reply-hd"><i class="iconfont">î˜ˆ</i> <span>ä½œè€…å›å¤</span></div> <p class="reply-content">å·²å›å¤ï¼Œä¸€ä¸ªcharä¸¤ä¸ªbyteï¼Œæ³¨æ„ä¸‹å„ä¸ªç±»å‹å®½åº¦</p> <p class="reply-time">2018-05-15</p></div></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/b5/65/815380a0.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">ç‹ä¸‡äº‘</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>3</span></a></div></div> <div class="bd">çœ‹å¤§ç¥çš„æ–‡ç« çœŸçš„æé«˜å¤ªå¤šäº†ï¼Œè€Œä¸”è¿˜è¦çœ‹è¯„è®ºï¼Œè¯„è®ºåŒºä¹Ÿéƒ½æ˜¯é«˜æ‰‹äº‘é›†</div> <span class="time">2018-05-20</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/34/df/551fbbed.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">echo</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>3</span></a></div></div> <div class="bd">Stringæ˜¯immutableï¼Œåœ¨security,  Cacheï¼ŒThread Safeç­‰æ–¹é¢éƒ½æœ‰å¾ˆå¥½çš„ä½“ç°ã€‚<br>Security: ä¼ å‚çš„æ—¶å€™æˆ‘ä»¬å¾ˆå¤šåœ°æ–¹ä½¿ç”¨Stringå‚æ•°ï¼Œå¯ä»¥ä¿è¯å‚æ•°ä¸ä¼šè¢«æ”¹å˜ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥å‚æ•°urlç­‰ï¼Œä»è€Œä¿è¯æ•°æ®åº“è¿æ¥å®‰å…¨ã€‚<br>Cache: å› ä¸ºåˆ›å»ºStringå‰å…ˆå»Constant Poolé‡Œé¢æŸ¥çœ‹æ˜¯å¦å·²ç»å­˜åœ¨æ­¤å­—ç¬¦ä¸²ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œå°±æŠŠè¯¥å­—ç¬¦ä¸²çš„åœ°å€å¼•ç”¨èµ‹ç»™å­—ç¬¦å˜é‡ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™åœ¨Constant Poolåˆ›å»ºå­—ç¬¦ä¸²ï¼Œå¹¶å°†å­—ç¬¦ä¸²å¼•ç”¨èµ‹ç»™å­—ç¬¦ä¸²å˜é‡ã€‚æ‰€ä»¥å­˜åœ¨å¤šä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œåˆ©ç”¨ç¼“å­˜æœ‰åŠ©æé«˜å†…å­˜å¼€é”€ã€‚<br>Thread Safe: å› ä¸ºStringæ˜¯immutableï¼Œ æ‰€ä»¥å®ƒæ˜¯Automatically thread safe. <br>é—®é¢˜ï¼šæˆ‘ä¸€ç›´ä¸èƒ½å¾ˆå¥½çš„ç†è§£æœ€åä¸€ä¸ªä½“ç°ï¼Œåˆ°åº•Stringæ˜¯å¦‚ä½•ä½“ç°åœ¨thread safeï¼Œè€å¸ˆèƒ½ä¸èƒ½ç”¨ç®€çŸ­çš„çº¿ç¨‹ä»£ç ç»™è®²è®²ï¼Ÿéå¸¸æ„Ÿæ¿€ã€‚</div> <span class="time">2018-05-16</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/static/time/img/defaultAvatar.e4ab9fe.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">Chris</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>3</span></a></div></div> <div class="bd">new stringï¼ˆâ€œghhhâ€ï¼‰.internï¼ˆï¼‰ï¼›ä¼šä»å †åˆ°å¸¸é‡æ± æ˜¯è¿™ä¸ªä½œç”¨å—</div> <span class="time">2018-05-15</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/06/ec/434081d2.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">è½©å°¼è¯—ã€‚</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>2</span></a></div></div> <div class="bd">String s = new String(â€œabcâ€) åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ
ç­”æ¡ˆ1ï¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰â€œabcâ€ï¼Œæœ‰åˆ™ä½œä¸ºå‚æ•°ï¼Œå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼›æ²¡æœ‰åˆ™åœ¨å¸¸é‡æ± ä¸­åˆ›å»ºï¼Œç„¶åè¿”å›å¼•ç”¨ï¼Œé‚£å°±æ˜¯åˆ›å»ºäº†ä¸¤ä¸ªå¯¹è±¡ã€‚
ç­”æ¡ˆ2ï¼šç›´æ¥åœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ä¸æ£€æŸ¥å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œä¹Ÿä¸ä¼šæŠŠå¯¹è±¡æ”¾å…¥æ± ä¸­ã€‚
ç½‘ä¸Šæ­£ç¡®ç­”æ¡ˆè²Œä¼¼æ˜¯ä¸¤ä¸ªï¼Œæ±‚æŒ‡æ•™åˆ°åº•æ˜¯å“ªä¸ªï¼


ç¬¬ä¸€ç§å¯ä»¥å†™æˆString a = "abc";String s = new String(a) ,é‚£ä¹ˆç¬¬ä¸€ç§è§£é‡Šè¯´å¾—é€šï¼ŒString a = "abc"ä¼šåœ¨å¸¸é‡æ± åˆ›å»ºâ€œabcâ€ã€‚ä½†æ˜¯stringç±»çš„intern()æ˜¯åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥æ‰¾è¯¥å­—ç¬¦ä¸²ï¼Œæœ‰å°±è¿”å›ï¼Œæ²¡æœ‰å°±åˆ›å»ºï¼Œå¦‚æœç¬¬ä¸€ç§è§£é‡Šè¯´å¾—é€šï¼Œé‚£è¿™ä¸ªæ–¹æ³•å°±åºŸäº†ã€‚</div> <span class="time">2018-05-31</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/4e/cf/21bea6bb.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">ç‹å»ºå¤</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>1</span></a></div></div> <div class="bd">è®²å¸ˆä½ å¥½ï¼Œæœ‰ä¸ªç–‘é—®ï¼šâ€œé»˜è®¤ç¼“å­˜å¤§å°ä¹Ÿåœ¨ä¸æ–­åœ°æ‰©å¤§ä¸­ï¼Œä»æœ€åˆçš„1009ï¼Œåˆ°7u40ä»¥åè¢«ä¿®æ”¹ä¸º60013ã€‚â€<br>è¿™é‡Œçš„1009 60013æ˜¯æŒ‡å­—ç¬¦ä¸²çš„ä¸ªæ•°ï¼Ÿè¿˜æ˜¯å†…å­˜å ç”¨ï¼Ÿå¦‚æœæ˜¯å†…å­˜å ç”¨çš„è¯ï¼Œé‚£å•ä½æ˜¯ä»€ä¹ˆï¼Ÿ</div> <span class="time">2018-06-24</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/9b/2f/b7a3625e.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">LenX</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>1</span></a></div></div> <div class="bd">è€å¸ˆï¼Œè¿™ç« å­¦ä¹ åˆ°äº† Java 8 ä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± è¢«ç§»åˆ°äº†å †ä¸­ï¼Œé‚£ä¹ˆï¼Œå¦‚æœé€šè¿‡ String.intern() äº§ç”Ÿäº†å¤§é‡çš„å­—ç¬¦ä¸²å¸¸é‡ï¼ŒJVM ä¼šå¯¹å®ƒä»¬è¿›è¡Œåƒåœ¾å›æ”¶å—ï¼Ÿ</div> <span class="time">2018-06-18</span> <div class="reply"><div class="reply-hd"><i class="iconfont">î˜ˆ</i> <span>ä½œè€…å›å¤</span></div> <p class="reply-content">ä¼šï¼Œå…·ä½“æ—¶æœºæˆ‘ä¹Ÿæ²¡æ³¨æ„</p> <p class="reply-time">2018-06-20</p></div></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/static/time/img/defaultAvatar.e4ab9fe.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">jamie</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>1</span></a></div></div> <div class="bd"><br>ç¼–è¯‘å™¨ä¸ºä»€ä¹ˆä¸æŠŠ <br>String myStr = "aa" + "bb" + "cc" + "dd"; <br>é»˜è®¤ä¼˜åŒ–æˆ<br>String myStr = "aabbccdd";<br>è¿™æ ·ä¸æ˜¯æ›´èªæ˜å˜›<br><br>è¿™ä¸ªæˆ‘åç¼–è¯‘è¯•è¿‡ï¼Œå·²ç»ä¼˜åŒ–æˆaabbccddäº†</div> <span class="time">2018-06-14</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/d4/f5/bf9f8711.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">Olm.chenteng</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>1</span></a></div></div> <div class="bd">String s1 = new String("do");<br>        s1.intern();<br>        String s2 = "do";<br><br>        System.out.println(s1 == s2);//false<br><br>        String s3 = new String("12") + new String("34");<br>        s3.intern();<br>        String s4 = "1234";<br>        System.out.println(s3 == s4);//true<br><br>æ±‚è§£,ä¸ºä»€ä¹ˆåœ¨ç¬¬äºŒæ®µæ¯”è¾ƒä¸­ä¼šè¿”å›true,ä»å­—èŠ‚ç çœ‹s3åº”è¯¥å°±æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªstringbuilderå¯¹è±¡å®Œæˆè¿æ¥æ“ä½œåæ‰§è¡Œäº†toString, s3ä¸æ˜¯åº”è¯¥ä»ç„¶æ˜¯å †å†…çš„å¯¹è±¡åœ°å€å—?ä¸ºä»€ä¹ˆä¼šå’Œå¸¸é‡æ± ä¸­çš„åœ°å€ç›¸ç­‰?</div> <span class="time">2018-06-11</span> <!----></div></li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/fe/c6/a62649ea.jpg" class="avatar"> <div class="info"><div class="hd"><span class="username">lo_</span> <div class="control"><!----> <a href="javascript:;" class="btn-praise"><i class="iconfont">î˜¦</i> <span>1</span></a></div></div> <div class="bd">ä»£ç è£è€€è¯´newçš„æ—¶å€™ä¸æ£€æŸ¥å­—ç¬¦ä¸²å¸¸é‡æ± .é‚£è¯·é—®è€å¸ˆ<br>String&nbsp;str1&nbsp;=&nbsp;"abc";&nbsp;&nbsp;<br>String&nbsp;str2&nbsp;=&nbsp;new&nbsp;String("abc");&nbsp;&nbsp;<br>ç¬¬äºŒè¡Œä»£ç åˆ°åº•åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡å‘¢.ç½‘ä¸Šè¯´1ä¸ª.å› ä¸ºabcå·²ç»åœ¨å¸¸é‡æ± .ä½†æ˜¯å¦‚æœnewä¸æ£€æŸ¥å¸¸é‡æ± é‚£æ˜¯ä¸æ˜¯åº”è¯¥æ˜¯ä¸¤ä¸ªå¯¹è±¡å‘¢?</div> <span class="time">2018-05-28</span> <!----></div></li></ul></div></div> <!----> <!----></div></div><link rel="dns-prefetch" href="//cdn.mathjax.org"><script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          displayMath: [ ["$$","$$"] ],
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'a']
        }
      });
      MathJax.Hub.Register.MessageHook("End Process", function (message) {
        var eve = new Event('mathjaxfini')
        window.dispatchEvent(eve)
      })</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-103082599-6', 'auto');
      ga('send', 'pageview');</script></body><iframe id="__ToutiaoJSBridgeIframe_SetResult" style="display: none;"></iframe><iframe id="__ToutiaoJSBridgeIframe" style="display: none;"></iframe>